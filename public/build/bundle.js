var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function o(){return Object.create(null)}function r(t){t.forEach(n)}function s(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}const i="undefined"!=typeof window;let a=i?()=>window.performance.now():()=>Date.now(),l=i?t=>requestAnimationFrame(t):t;const u=new Set;function d(t){u.forEach((e=>{e.c(t)||(u.delete(e),e.f())})),0!==u.size&&l(d)}function f(t,e){t.appendChild(e)}function p(t,e,n){t.insertBefore(e,n||null)}function m(t){t.parentNode.removeChild(t)}function h(t){return document.createElement(t)}function g(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function $(t){return document.createTextNode(t)}function y(){return $(" ")}function w(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function v(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function _(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function b(t,e,n,o){t.style.setProperty(e,n,o?"important":"")}function L(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}const x=new Set;let k,C=0;function E(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),r=n.length-o.length;r&&(t.style.animation=o.join(", "),C-=r,C||l((()=>{C||(x.forEach((t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}})),x.clear())})))}function O(t){k=t}function S(){if(!k)throw new Error("Function called outside component initialization");return k}function R(t){S().$$.on_mount.push(t)}const M=[],N=[],j=[],z=[],A=Promise.resolve();let D=!1;function P(t){j.push(t)}let J=!1;const Z=new Set;function B(){if(!J){J=!0;do{for(let t=0;t<M.length;t+=1){const e=M[t];O(e),T(e.$$)}for(O(null),M.length=0;N.length;)N.pop()();for(let t=0;t<j.length;t+=1){const e=j[t];Z.has(e)||(Z.add(e),e())}j.length=0}while(M.length);for(;z.length;)z.pop()();D=!1,J=!1,Z.clear()}}function T(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(P)}}let U;function q(t,e,n){t.dispatchEvent(L(`${e?"intro":"outro"}${n}`))}const F=new Set;let I;function G(){I={r:0,c:[],p:I}}function H(){I.r||r(I.c),I=I.p}function K(t,e){t&&t.i&&(F.delete(t),t.i(e))}function Q(t,e,n,o){if(t&&t.o){if(F.has(t))return;F.add(t),I.c.push((()=>{F.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}const V={duration:0};function W(n,o,r){let c,i,f=o(n,r),p=!1,m=0;function g(){c&&E(n,c)}function $(){const{delay:o=0,duration:r=300,easing:s=e,tick:$=t,css:y}=f||V;y&&(c=function(t,e,n,o,r,s,c,i=0){const a=16.666/o;let l="{\n";for(let t=0;t<=1;t+=a){const o=e+(n-e)*s(t);l+=100*t+`%{${c(o,1-o)}}\n`}const u=l+`100% {${c(n,1-n)}}\n}`,d=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${i}`,f=t.ownerDocument;x.add(f);const p=f.__svelte_stylesheet||(f.__svelte_stylesheet=f.head.appendChild(h("style")).sheet),m=f.__svelte_rules||(f.__svelte_rules={});m[d]||(m[d]=!0,p.insertRule(`@keyframes ${d} ${u}`,p.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?`${g}, `:""}${d} ${o}ms linear ${r}ms 1 both`,C+=1,d}(n,0,1,r,o,s,y,m++)),$(0,1);const w=a()+o,v=w+r;i&&i.abort(),p=!0,P((()=>q(n,!0,"start"))),i=function(t){let e;return 0===u.size&&l(d),{promise:new Promise((n=>{u.add(e={c:t,f:n})})),abort(){u.delete(e)}}}((t=>{if(p){if(t>=v)return $(1,0),q(n,!0,"end"),g(),p=!1;if(t>=w){const e=s((t-w)/r);$(e,1-e)}}return p}))}let y=!1;return{start(){y||(E(n),s(f)?(f=f(),(U||(U=Promise.resolve(),U.then((()=>{U=null}))),U).then($)):$())},invalidate(){y=!1},end(){p&&(g(),p=!1)}}}function X(t){t&&t.c()}function Y(t,e,o){const{fragment:c,on_mount:i,on_destroy:a,after_update:l}=t.$$;c&&c.m(e,o),P((()=>{const e=i.map(n).filter(s);a?a.push(...e):r(e),t.$$.on_mount=[]})),l.forEach(P)}function tt(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function et(t,e){-1===t.$$.dirty[0]&&(M.push(t),D||(D=!0,A.then(B)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function nt(e,n,s,c,i,a,l=[-1]){const u=k;O(e);const d=n.props||{},f=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:i,bound:o(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:o(),dirty:l,skip_bound:!1};let p=!1;if(f.ctx=s?s(e,d,((t,n,...o)=>{const r=o.length?o[0]:n;return f.ctx&&i(f.ctx[t],f.ctx[t]=r)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](r),p&&et(e,t)),n})):[],f.update(),p=!0,r(f.before_update),f.fragment=!!c&&c(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach(m)}else f.fragment&&f.fragment.c();n.intro&&K(e.$$.fragment),Y(e,n.target,n.anchor),B()}O(u)}class ot{$destroy(){tt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function rt(t){const e=t-1;return e*e*e+1}function st(t,{delay:e=0,duration:n=400,easing:o=rt,x:r=0,y:s=0,opacity:c=0}){const i=getComputedStyle(t),a=+i.opacity,l="none"===i.transform?"":i.transform,u=a*(1-c);return{delay:e,duration:n,easing:o,css:(t,e)=>`\n\t\t\ttransform: ${l} translate(${(1-t)*r}px, ${(1-t)*s}px);\n\t\t\topacity: ${a-u*e}`}}const ct=document.createElement("a");function it(t,e){!function(t,e,n=JSON.strringify){const o=n(t),r=new Blob([o],{type:"octet/stream"}),s=window.URL.createObjectURL(r);ct.href=s,ct.download=e,ct.click(),window.URL.revokeObjectURL(s)}(t,e,JSON.stringify)}function at(t,e,n){const o=t.slice();return o[1]=e[n],o}function lt(t){let e,n,o,r=JSON.stringify(t[1],null,2)+"";return{c(){e=h("pre"),n=$(r),o=$("\n    ")},m(t,r){p(t,e,r),f(e,n),f(e,o)},p(t,e){1&e&&r!==(r=JSON.stringify(t[1],null,2)+"")&&_(n,r)},d(t){t&&m(e)}}}function ut(e){let n,o,r,s,c,i,a,l=~~(e[0].reduce(dt,0)/1e3)+"",u=e[0],d=[];for(let t=0;t<u.length;t+=1)d[t]=lt(at(e,u,t));return{c(){n=h("div"),o=h("div"),r=$("total elapsed time: "),s=$(l),c=$(" sec"),i=y(),a=h("div");for(let t=0;t<d.length;t+=1)d[t].c();v(n,"class","summary svelte-1d25rg"),v(a,"class","data svelte-1d25rg")},m(t,e){p(t,n,e),f(n,o),f(o,r),f(o,s),f(o,c),p(t,i,e),p(t,a,e);for(let t=0;t<d.length;t+=1)d[t].m(a,null)},p(t,[e]){if(1&e&&l!==(l=~~(t[0].reduce(dt,0)/1e3)+"")&&_(s,l),1&e){let n;for(u=t[0],n=0;n<u.length;n+=1){const o=at(t,u,n);d[n]?d[n].p(o,e):(d[n]=lt(o),d[n].c(),d[n].m(a,null))}for(;n<d.length;n+=1)d[n].d(1);d.length=u.length}},i:t,o:t,d(t){t&&m(n),t&&m(i),t&&m(a),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(d,t)}}}ct.style="display: none;",document.body.appendChild(ct);const dt=(t,e)=>t+e.elapsed;function ft(t,e,n){let{data:o=[]}=e;return t.$$set=t=>{"data"in t&&n(0,o=t.data)},[o]}class pt extends ot{constructor(t){super(),nt(this,t,ft,ut,c,{data:0})}}function mt(e){let n,o;return{c(){n=g("svg"),o=g("path"),v(o,"d","M1.5,9.375L1.5,3.5C1.5,2.97 1.711,2.461 2.086,2.086C2.461,1.711 2.97,1.5\n    3.5,1.5L14.5,1.5C15.03,1.5 15.539,1.711 15.914,2.086C16.289,2.461 16.5,2.97\n    16.5,3.5L16.5,14.5C16.5,15.03 16.289,15.539 15.914,15.914C15.539,16.289\n    15.03,16.5 14.5,16.5L9.643,16.5L8.357,16.5L3.5,16.5C2.97,16.5 2.461,16.289\n    2.086,15.914C1.711,15.539 1.5,15.03\n    1.5,14.5L1.5,10.625L1.5,9.375ZM8.357,15L8.357,10.625L3,10.625L3,15L8.357,15ZM15,10.625L9.643,10.625L9.643,15L15,15L15,10.625ZM3,4.5L3,9.375L8.357,9.375L8.357,4.5L3,4.5ZM9.643,4.5L9.643,9.375L15,9.375L15,4.5L9.643,4.5Z"),v(n,"width",e[0]),v(n,"height",e[0]),v(n,"fill",e[1]),v(n,"viewBox","0 0 18 18"),v(n,"version","1.1"),v(n,"xmlns","http://www.w3.org/2000/svg"),v(n,"xmlns:xlink","http://www.w3.org/1999/xlink"),v(n,"xml:space","preserve"),v(n,"xmlns:serif","http://www.serif.com/"),b(n,"fill-rule","evenodd"),b(n,"clip-rule","evenodd"),b(n,"stroke-linejoin","round"),b(n,"stroke-miterlimit","2")},m(t,e){p(t,n,e),f(n,o)},p(t,[e]){1&e&&v(n,"width",t[0]),1&e&&v(n,"height",t[0]),2&e&&v(n,"fill",t[1])},i:t,o:t,d(t){t&&m(n)}}}function ht(t,e,n){let{size:o="1em"}=e,{color:r="currentColor"}=e;return t.$$set=t=>{"size"in t&&n(0,o=t.size),"color"in t&&n(1,r=t.color)},[o,r]}class gt extends ot{constructor(t){super(),nt(this,t,ht,mt,c,{size:0,color:1})}}function $t(t){let e,n,o,s,c,i,a,l,u,d,g,_,b,L,x,k,C,E,O;u=new gt({props:{size:"1.25em"}});const S=[wt,yt],R=[];function M(t,e){return t[0].length?0:1}return L=M(t),x=R[L]=S[L](t),{c(){e=h("div"),n=h("header"),o=h("h1"),o.textContent="Browsing Time Tracker",s=y(),c=h("div"),i=h("button"),i.textContent="Reset Data",a=y(),l=h("button"),X(u.$$.fragment),d=$("\n                    Download JSON"),_=y(),b=h("main"),x.c(),v(i,"class","btn btn-secondary"),l.disabled=g=0===t[0].length,v(l,"class","btn btn-primary download-csv"),v(c,"class","cta svelte-1r3p40z"),v(e,"class","admin")},m(r,m){p(r,e,m),f(e,n),f(n,o),f(n,s),f(n,c),f(c,i),f(c,a),f(c,l),Y(u,l,null),f(l,d),f(e,_),f(e,b),R[L].m(b,null),C=!0,E||(O=[w(i,"click",t[3]),w(l,"click",t[4])],E=!0)},p(t,e){(!C||1&e&&g!==(g=0===t[0].length))&&(l.disabled=g);let n=L;L=M(t),L===n?R[L].p(t,e):(G(),Q(R[n],1,1,(()=>{R[n]=null})),H(),x=R[L],x?x.p(t,e):(x=R[L]=S[L](t),x.c()),K(x,1),x.m(b,null))},i(t){C||(K(u.$$.fragment,t),K(x),k||P((()=>{k=W(e,st,{duration:800,y:5}),k.start()})),C=!0)},o(t){Q(u.$$.fragment,t),Q(x),C=!1},d(t){t&&m(e),tt(u),R[L].d(),E=!1,r(O)}}}function yt(e){let n;return{c(){n=$("no browsing data yet")},m(t,e){p(t,n,e)},p:t,i:t,o:t,d(t){t&&m(n)}}}function wt(t){let e,n,o,r,s,c,i=t[0].length+"",a=1===t[0].length?"":"s";return s=new pt({props:{data:t[0]}}),{c(){e=$(i),n=$("\n                item"),o=$(a),r=$(".\n                "),X(s.$$.fragment)},m(t,i){p(t,e,i),p(t,n,i),p(t,o,i),p(t,r,i),Y(s,t,i),c=!0},p(t,n){(!c||1&n)&&i!==(i=t[0].length+"")&&_(e,i),(!c||1&n)&&a!==(a=1===t[0].length?"":"s")&&_(o,a);const r={};1&n&&(r.data=t[0]),s.$set(r)},i(t){c||(K(s.$$.fragment,t),c=!0)},o(t){Q(s.$$.fragment,t),c=!1},d(t){t&&m(e),t&&m(n),t&&m(o),t&&m(r),tt(s,t)}}}function vt(t){let e,n,o=t[1]&&$t(t);return{c(){o&&o.c(),e=$("")},m(t,r){o&&o.m(t,r),p(t,e,r),n=!0},p(t,[n]){t[1]?o?(o.p(t,n),2&n&&K(o,1)):(o=$t(t),o.c(),K(o,1),o.m(e.parentNode,e)):o&&(G(),Q(o,1,1,(()=>{o=null})),H())},i(t){n||(K(o),n=!0)},o(t){Q(o),n=!1},d(t){o&&o.d(t),t&&m(e)}}}function _t(t,e,n){let{data:o}=e,r=!1;R((()=>{n(1,r=!0)}));const s=function(){const t=S();return(e,n)=>{const o=t.$$.callbacks[e];if(o){const r=L(e,n);o.slice().forEach((e=>{e.call(t,r)}))}}}();return t.$$set=t=>{"data"in t&&n(0,o=t.data)},[o,r,s,()=>{s("reset-data")},()=>it(o,`browsing-${(new Date).toISOString().replace(/:/g,"-").replace(".","-")}.json`)]}class bt extends ot{constructor(t){super(),nt(this,t,_t,vt,c,{data:0})}}function Lt(t){let e,n,o,r;return e=new bt({props:{data:t[0]}}),e.$on("reset-data",t[1]),{c(){X(e.$$.fragment)},m(s,c){Y(e,s,c),n=!0,o||(r=w(window,"focus",t[2]),o=!0)},p(t,[n]){const o={};1&n&&(o.data=t[0]),e.$set(o)},i(t){n||(K(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(t){tt(e,t),o=!1,r()}}}async function xt(t,e,n){const o={type:e,data:n};t.postMessage(o)}async function kt(t,e){return await new Promise((n=>{let o=r=>{r.type===e&&(t.onMessage.removeListener(o),n(r.data))};t.onMessage.addListener(o)}))}function Ct(t,e,n){let o,r=[];async function s(){r=[],o=browser.runtime.connect({name:"rally-study-options-page"}),o.onMessage.addListener((t=>async function(t){switch(t.type){case"receive-data":r.forEach((e=>e(t.data)));break;case"reset-finished":n(0,c=[]);break;default:return Promise.reject(new Error(`Rally - unexpected message type ${t.type}`))}}(t))),o.onDisconnect.addListener((t=>{console.error("Rally - there was an error connecting to the background script",t),o=null}))}let c=[];async function i(){n(0,c=await async function(){try{let t=kt(o,"receive-data");return await xt(o,"get-data",{}),await t}catch(t){console.error(t)}}())}return R((async()=>{await s(),await i()})),[c,async function(){try{let t=kt(o,"reset-finished");return await xt(o,"reset",{}),await t}catch(t){console.error(t)}},i]}return new class extends ot{constructor(t){super(),nt(this,t,Ct,Lt,c,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
