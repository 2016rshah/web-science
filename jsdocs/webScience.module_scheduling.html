<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Module: scheduling</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Module: scheduling</h1>

    




<section>

<header>
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description"><p>This module enables subscribing to periodic events, currently on a daily or
weekly schedule.</p>
<p>The module guarantees a lower bound on when the event will fire, rather than
a precise time for when the event will fire. This constraint is because
the browser may not be open when the event would next fire, and because the
module attempts to wait for an idle state to avoid browser jank.</p>
<p>The heuristic for determining when to fire the next idle daily event is
identical to the heuristic used for the <code>idle-daily</code> event issued by the
Firefox <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIIdleService"><code>nsIdleService</code></a>.</p>
<ol>
<li>Wait a day since the most recent idle daily event, or if the extension
was just installed, wait a day after install.</li>
<li>Listen for the next idle state, with a detection interval of 3 minutes.</li>
<li>If an idle state does not occur within 24 hours, shorten the detection
interval to 1 minute.</li>
</ol>
<p>The idle daily event fires as soon as the browser enters an idle state that
satisfies the heuristic. The idle weekly event fires just after an idle
daily event when it has been at least 7 days since the last idle weekly
event.</p>
<p>Some implementation quirks to be aware of for use and future development:</p>
<ul>
<li>
<p>This module does not subscribe to the <code>idle-daily</code> event from the
<code>nsIdleService</code> to minimize privileged extension code and so that it
runs on a different schedule from Firefox daily tasks (e.g., Telemetry).</p>
</li>
<li>
<p>This module uses <code>setTimeout</code> to handle corner cases where the browser
goes idle before the idle daily event should fire and remains idle
through when the idle daily event should fire. The timeouts are
configured on startup (and periodically) based on timestamps in
persistent storage, so it is not a problem that timeouts do not
persist between browser sessions.</p>
</li>
</ul></div>
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="scheduling.js.html">scheduling.js</a>, <a href="scheduling.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    

    
</dl>


        
    
    </div>

    

    

    

    

    

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id=".onIdleDaily"><span class="type-signature">(static, constant) </span>onIdleDaily<span class="type-signature"> :Events.EventWithoutOptions.&lt;Events.callbackWithoutParameters></span></h4>




<div class="description">
    <p>An event that fires about once a day, when the browser is idle.</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Events.EventWithoutOptions.&lt;Events.callbackWithoutParameters></span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="scheduling.js.html">scheduling.js</a>, <a href="scheduling.js.html#line125">line 125</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id=".onIdleWeekly"><span class="type-signature">(static, constant) </span>onIdleWeekly<span class="type-signature"> :Events.EventWithoutOptions.&lt;Events.callbackWithoutParameters></span></h4>




<div class="description">
    <p>An event that fires about once a week, when the browser is idle.</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Events.EventWithoutOptions.&lt;Events.callbackWithoutParameters></span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="scheduling.js.html">scheduling.js</a>, <a href="scheduling.js.html#line134">line 134</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
    

    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="webScience.module_contentScripts.html">contentScripts</a></li><li><a href="webScience.module_dataAnalysis.html">dataAnalysis</a></li><li><a href="webScience.module_debugging.html">debugging</a></li><li><a href="webScience.module_events.html">events</a></li><li><a href="webScience.module_idle.html">idle</a></li><li><a href="webScience.module_linkExposure.html">linkExposure</a></li><li><a href="webScience.module_linkResolution.html">linkResolution</a></li><li><a href="webScience.module_matching.html">matching</a></li><li><a href="webScience.module_messaging.html">messaging</a></li><li><a href="webScience.module_pageClassification.html">pageClassification</a></li><li><a href="webScience.module_pageManager.html">pageManager</a></li><li><a href="webScience.module_pageNavigation.html">pageNavigation</a></li><li><a href="webScience.module_scheduling.html">scheduling</a></li><li><a href="webScience.module_socialMediaActivity.html">socialMediaActivity</a></li><li><a href="webScience.module_socialMediaLinkSharing.html">socialMediaLinkSharing</a></li><li><a href="webScience.module_storage.html">storage</a></li><li><a href="webScience.module_userSurvey.html">userSurvey</a></li></ul><h3>Classes</h3><ul><li><a href="webScience.module_events.Event.html">Event</a></li><li><a href="webScience.module_events.EventSingleton.html">EventSingleton</a></li><li><a href="webScience.module_events.EventWithoutOptions.html">EventWithoutOptions</a></li><li><a href="webScience.module_matching.MatchPatternSet.html">MatchPatternSet</a></li><li><a href="webScience.module_storage.Counter.html">Counter</a></li><li><a href="webScience.module_storage.IndexedStorage.html">IndexedStorage</a></li><li><a href="webScience.module_storage.KeyValueStorage.html">KeyValueStorage</a></li></ul><h3>Interfaces</h3><ul><li><a href="webScience.module_linkExposure-LinkExposureDetails.html">LinkExposureDetails</a></li><li><a href="webScience.module_pageNavigation-PageDataDetails.html">PageDataDetails</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Tue Apr 06 2021 12:42:55 GMT-0700 (Pacific Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>