<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Module: idle</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Module: idle</h1>

    




<section>

<header>
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description"><p>This module enables registering browser idle state listeners with
varying detection intervals. The module is needed because the
WebExtensions <code>idle</code> API currently only supports one detection
interval per extension.</p>
<p>The implementation of this module combines the WebExtensions <code>idle</code>
API and <code>setTimeout</code>. It configures the <code>idle</code> API to use the
minimum idle detection interval with <code>idle.setDetectionInterval()</code>,
registers a listener for the <code>idle.onStateChanged</code> event, and then
uses <code>setTimeout</code> after the browser goes idle to notify idle state
listeners with detection intervals greater than the minimum. If there
are any pending idle notification timeouts when the browser goes
active, those timeouts are cleared.</p>
<p>Some implementation quirks to be aware of for use and future
development:</p>
<ul>
<li>
<p>This module depends on configuring the detection interval
for the <code>idle</code> API to its minimum value. Any subsequent changes to
the idle state detection interval in the <code>idle</code> API will result in
unpredictable behavior.</p>
</li>
<li>
<p>Idle state events generated by this module are not guaranteed to
reflect idle state transitions (e.g., a listener might receive
<code>&quot;active&quot;</code> followed by <code>&quot;active&quot;</code>). We might want to implement this
guarantee eventually.</p>
</li>
<li>
<p>Because the browser idle state resets with each browser session,
it is not a problem that timeouts do not persist between browser
sessions.</p>
</li>
<li>
<p>The module does not directly interact with the Firefox
<a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIIdleService"><code>nsIdleService</code></a>,
even though it supports varying idle state detection intervals, in
order to minimize privileged extension code.</p>
</li>
</ul></div>
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="idle.js.html">idle.js</a>, <a href="idle.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    

    
</dl>


        
    
    </div>

    

    

    

    

    

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id=".queryState"><span class="type-signature">(static) </span>queryState<span class="signature">(detectionIntervalInSeconds)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Determine whether the browser has been idle for a specified time.
This function is synchronous, unlike <code>idle.queryState</code>. Note that,
if an idle state listener has not been registered, this function
will always return the default value of active state.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>detectionIntervalInSeconds</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"><p>The detection interval
to use</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="idle.js.html">idle.js</a>, <a href="idle.js.html#line121">line 121</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id=".registerIdleStateListener"><span class="type-signature">(static) </span>registerIdleStateListener<span class="signature">(idleStateListener, detectionIntervalInSeconds)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Register a listener function for browser idle state.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>idleStateListener</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p>The listener function.
The function will receive the same <code>idle.IdleState</code> parameter
as if it had subscribed to idle state events with
<code>browser.idle.onStateChanged.addListener</code>.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>detectionIntervalInSeconds</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"><p>The detection
interval for firing the idle state listener. Note that this
time in measured in seconds because that is how the <code>idle</code>
API is implemented, even though most times in the library
are measured in milliseconds.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="idle.js.html">idle.js</a>, <a href="idle.js.html#line193">line 193</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="webScience.module_contentScripts.html">contentScripts</a></li><li><a href="webScience.module_dataAnalysis.html">dataAnalysis</a></li><li><a href="webScience.module_debugging.html">debugging</a></li><li><a href="webScience.module_events.html">events</a></li><li><a href="webScience.module_idle.html">idle</a></li><li><a href="webScience.module_linkExposure.html">linkExposure</a></li><li><a href="webScience.module_linkResolution.html">linkResolution</a></li><li><a href="webScience.module_matching.html">matching</a></li><li><a href="webScience.module_messaging.html">messaging</a></li><li><a href="webScience.module_pageClassification.html">pageClassification</a></li><li><a href="webScience.module_pageManager.html">pageManager</a></li><li><a href="webScience.module_pageNavigation.html">pageNavigation</a></li><li><a href="webScience.module_scheduling.html">scheduling</a></li><li><a href="webScience.module_socialMediaActivity.html">socialMediaActivity</a></li><li><a href="webScience.module_socialMediaLinkSharing.html">socialMediaLinkSharing</a></li><li><a href="webScience.module_storage.html">storage</a></li><li><a href="webScience.module_userSurvey.html">userSurvey</a></li></ul><h3>Classes</h3><ul><li><a href="webScience.module_events.Event.html">Event</a></li><li><a href="webScience.module_events.EventSingleton.html">EventSingleton</a></li><li><a href="webScience.module_events.EventWithoutOptions.html">EventWithoutOptions</a></li><li><a href="webScience.module_matching.MatchPatternSet.html">MatchPatternSet</a></li><li><a href="webScience.module_storage.Counter.html">Counter</a></li><li><a href="webScience.module_storage.IndexedStorage.html">IndexedStorage</a></li><li><a href="webScience.module_storage.KeyValueStorage.html">KeyValueStorage</a></li></ul><h3>Interfaces</h3><ul><li><a href="webScience.module_linkExposure-LinkExposureDetails.html">LinkExposureDetails</a></li><li><a href="webScience.module_pageNavigation-PageDataDetails.html">PageDataDetails</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Tue Apr 06 2021 12:42:55 GMT-0700 (Pacific Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>